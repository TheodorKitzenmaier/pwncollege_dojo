{% extends "base.html" %}


{% block stylesheets %}
{{ super() }}

<style>
html, body, main {
	width: 100%;
	height: 100%;
	margin-bottom: 0px;
	{% if hide_navbar %}padding-top: 0px;{% endif %}
}

.challenge-workspace {
	width: 100%;
	height: 100%;
}

.workspace-controls {
	width: 100%;
	height: 10%;
	margin-right: 0px;
	margin-left: 0px;
}

.challenge-content {
	width: 100%;
	height: 90%;
}

.workspace-selector {
	font-size: 1.75vw;
}

.flag-field-dynamic {
	width: calc(50% + {% if not challenge.allow_privileged %}10%{% else %}0%{% endif %} + {% if hide_navbar %}10%{% else %}0%{% endif %} + {% if workspace_selectable %}0%{% else %}10%{% endif %});
	padding: .3%;
}

.control-btn-frame {
	width: 10%;
	padding: .3%;
}

.control-btn-std {
	width: 100% !important;
	height: 100% !important;
}

.submit-correct {
	background-color: #0f0 !important;
}

.submit-incorrect {
	background-color: #f00 !important;
}

.submit-warn {
	background-color: #ff0 !important;
}

</style>

{% endblock %}


{% block content %}

{% if hide_navbar %}
<div id="hide-navbar"></div>
{% endif %}

<div class="challenge-workspace">
	<iframe src="" id="challenge-content" class="challenge-content"></iframe>

	<div class="row workspace-controls">
		{% if workspace_selectable %}
		<div class="control-btn-frame">
			<select id="workspace-select" class="control-btn-std btn btn-outline-secondary workspace-selector">
				{% for name, command in workspace_options.items() %}
				<option value="{{ command }}" {% if name == workspace_active %}id="active"{% endif %}>{{ name }}</option>
				{% endfor %}
			</select>
		</div>
		{% endif %}
		<div class="control-btn-frame">
			<button id="start" class="control-btn-std btn btn-md btn-outline-secondary">
				<i class="fas fa-play fa-2x"></i>
			</button>
		</div>
		{% if challenge.allow_privileged %}
		<div class="control-btn-frame">
			<button id="start-priv" class="control-btn-std btn btn-md btn-outline-secondary">
				<i class="fas fa-lock-open fa-2x"></i>
			</button>
		</div>
		{% endif %}
		<div class="control-btn-frame">
			<button id="restart" class="control-btn-std btn btn-md btn-outline-secondary">
				<i class="fas fa-undo fa-2x"></i>
			</button>
		</div>
		<div class="flag-field-dynamic">
			<input type="hidden" id="current-challenge-id" value="{{ challenge.challenge_id }}">
			<input id="flag-input" class="control-btn-std form-control" type="text" placeholder="Flag">
		</div>
		{% if not hide_navbar %}
		<div class="control-btn-frame">
			<button id="fullscreen" class="control-btn-std btn btn-md btn-outline-secondary">
				<i class="fas fa-expand fa-2x"></i>
			</button>
		</div>
		{% endif %}
	</div>
</div>

<div id="alert"></div>

{% endblock %}


{% block scripts %}

<script defer src="{{ url_for('views.themes', path='js/dojo/workspace_exp.js') }}"></script>

{% endblock %}